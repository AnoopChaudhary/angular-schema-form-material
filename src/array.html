<div sf-array="form" class="schema-form-array {{form.htmlClass}}"
     ng-model="$$value$$" ng-model-options="form.ngModelOptions">
  <h3 ng-show="form.title && form.notitle !== true">{{ form.title }}</h3>
  <ol class="list-group" ng-model="modelArray" ui-sortable>
    <li class="list-group-item {{form.fieldHtmlClass}}"
        ng-repeat="item in modelArray track by $index">
      <md-button ng-hide="form.readonly || form.remove === null"
              ng-click="deleteFromArray($index)"
              style="position: relative; z-index: 20;"
              type="button" class="close pull-right">
              <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
      </md-button>
      <sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator>
    </li>
  </ol>
  <div class="clearfix" style="padding: 15px;">
    <md-button ng-hide="form.readonly || form.add === null"
            ng-click="appendToArray()"
            type="button"
            class="btn {{ form.style.add || 'btn-default' }} pull-right">
      <i class="glyphicon glyphicon-plus"></i>
      {{ form.add || 'Add'}}
    </md-button>
  </div>
  <div ng-messages="ngModel.$error">
    <!--
       This is a bit of a hack. sf-message does the work, but ng-messages and ng-message
       is needed for the styling
    -->
    <div sf-message ng-message></div>
  </div>
</div>
